<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Event Registration | InfoNest</title>
    <link rel="icon" href="data:;base64,=">
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;500;700&display=swap" rel="stylesheet">
    <style>
        :root {
            --background: hsl(0 0% 96%);
            --foreground: hsl(0 0% 9%);
            --card: hsl(0 0% 98%);
            --primary: hsl(20 90% 48%);
            --primary-foreground: hsl(33 100% 96%);
            --muted: hsl(0 0% 63%);
            --border: hsl(0 0% 83%);
            --input: hsl(0 0% 83%);
            --ring: hsl(20 90% 48%);
            --radius: 0.75rem;
            --shadow-lg: 0 1px 3px 0px hsl(0 0% 0% / 0.1), 0 4px 6px -1px hsl(0 0% 0% / 0.1);
        }

        .dark {
            --background: hsl(0 0% 9%);
            --foreground: hsl(0 0% 98%);
            --card: hsl(0 0% 14%);
            --primary: hsl(27 95% 60%);
            --primary-foreground: hsl(12 81% 14%);
            --muted: hsl(0 0% 45%);
            --border: hsl(0 0% 32%);
            --input: hsl(0 0% 32%);
            --ring: hsl(27 95% 60%);
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Roboto', sans-serif;
            background: var(--background);
            color: var(--foreground);
            min-height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 1.5rem;
        }

        .container {
            width: 100%;
            max-width: 500px;
        }

        .card {
            background: var(--card);
            border: 1px solid var(--border);
            border-radius: var(--radius);
            padding: 2rem;
            box-shadow: var(--shadow-lg);
        }

        .card h1 {
            font-size: 1.5rem;
            color: var(--primary);
            margin-bottom: 0.5rem;
            text-align: center;
        }

        .card p {
            color: var(--muted);
            font-size: 0.875rem;
            text-align: center;
            margin-bottom: 1.5rem;
        }

        .form-group {
            margin-bottom: 1.25rem;
        }

        .form-group label {
            display: block;
            font-weight: 500;
            margin-bottom: 0.5rem;
            font-size: 0.875rem;
        }

        .form-group input,
        .form-group select,
        .form-group textarea {
            width: 100%;
            padding: 0.75rem 1rem;
            border: 1px solid var(--input);
            border-radius: var(--radius);
            background: var(--background);
            color: var(--foreground);
            font-size: 1rem;
            font-family: inherit;
            transition: 0.2s;
        }

        .form-group input:focus,
        .form-group select:focus,
        .form-group textarea:focus {
            outline: none;
            border-color: var(--ring);
            box-shadow: 0 0 0 3px hsl(20 90% 48% / 0.1);
        }

        .form-row {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 1rem;
        }

        .btn {
            width: 100%;
            padding: 0.875rem 1.5rem;
            border: none;
            border-radius: var(--radius);
            font-size: 1rem;
            font-weight: 500;
            cursor: pointer;
            transition: 0.2s;
            font-family: inherit;
        }

        .btn-primary {
            background: var(--primary);
            color: var(--primary-foreground);
        }

        .btn-primary:hover {
            transform: translateY(-1px);
            box-shadow: var(--shadow-lg);
        }

        .btn-secondary {
            background: var(--card);
            color: var(--foreground);
            border: 1px solid var(--border);
            margin-top: 0.75rem;
        }

        .theme-toggle {
            position: fixed;
            top: 1rem;
            right: 1rem;
            background: var(--card);
            border: 1px solid var(--border);
            border-radius: var(--radius);
            padding: 0.5rem;
            cursor: pointer;
            color: var(--foreground);
        }
    </style>
</head>

<body class="dark">
    <button class="theme-toggle" onclick="toggleTheme()">üåô</button>

    <div class="container">
        <div class="card">
            <h1>üìù Event Registration</h1>
            <p>Fill in your details to complete registration</p>

            <form id="customRegistrationForm">
                <div class="form-row">
                    <div class="form-group">
                        <label for="name">Full Name *</label>
                        <input type="text" id="name" name="name" placeholder="Your full name" required>
                    </div>
                    <div class="form-group">
                        <label for="college">College/Department *</label>
                        <input type="text" id="college" name="college" placeholder="e.g., CSE" required>
                    </div>
                </div>

                <div class="form-row">
                    <div class="form-group">
                        <label for="branch">Branch/Major *</label>
                        <input type="text" id="branch" name="branch" placeholder="e.g., Computer Science" required>
                    </div>
                    <div class="form-group">
                        <label for="year">Year of Study *</label>
                        <select id="year" name="year" required>
                            <option value="">Select Year</option>
                            <option value="1st Year">1st Year</option>
                            <option value="2nd Year">2nd Year</option>
                            <option value="3rd Year">3rd Year</option>
                            <option value="4th Year">4th Year</option>
                            <option value="Other">Other</option>
                        </select>
                    </div>
                </div>

                <div class="form-group">
                    <label for="phone">Phone Number *</label>
                    <input type="tel" id="phone" name="phone" placeholder="Your contact number" required>
                </div>

                <div class="form-group">
                    <label for="resumeLink">Resume/Portfolio Link (Optional)</label>
                    <input type="url" id="resumeLink" name="resumeLink" placeholder="https://your-portfolio.com">
                </div>

                <div class="form-group">
                    <label for="message">Why do you want to participate? (Optional)</label>
                    <textarea id="message" name="message" rows="3"
                        placeholder="Tell us about your interest..."></textarea>
                </div>

                <button type="submit" class="btn btn-primary">Submit Registration</button>
                <button type="button" class="btn btn-secondary"
                    onclick="window.location.href='clubdashboard.html'">Cancel</button>
            </form>
        </div>
    </div>

    <script src="main.js"></script>
    <script>
        function toggleTheme() {
            document.body.classList.toggle('dark');
            localStorage.setItem('theme', document.body.classList.contains('dark') ? 'dark' : 'light');
        }
        if (localStorage.getItem('theme') === 'light') document.body.classList.remove('dark');

        // Check auth on page load (but don't create registration yet)
        document.addEventListener('DOMContentLoaded', async () => {
            const auth = window.InfoNest.getAuthData();
            if (!auth.token) {
                alert('Please login to register for events.');
                window.location.href = 'login.html';
                return;
            }

            const eventId = localStorage.getItem('savedEventId');
            if (!eventId) {
                alert('No event selected. Please select an event first.');
                window.location.href = 'clubdashboard.html';
                return;
            }

            // Pre-fill name if available
            if (auth.firstName) {
                document.getElementById('name').value = auth.firstName;
            }

            // Note: Registration will be created on form submit, NOT here
        });
    </script>
    <script src="club_form.js"></script>
</body>

</html>